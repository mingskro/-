---
title: Homelab
permalink: /homelab/
#layout: collection
#collection: homelab
#entries_layout: grid
classes: wide
author_profile: false
toc: true
sidebar:
#  title: "Homelab"
  nav: homelab
---

한달 전 쯤 문득 초딩 아들들이 내게 와 묻는다.. `아빠 마인크래프트 자바 버전 하려면 어떻게 해요?`

드디어 마인크래프트 자바 서버를 구축 할 시간이 온 것인가..

## 홈 서버
예전에도 서버는 돌렸던 적이 있었지만, 그때는 [Plex Media Server](https://plex.tv)와 파일서버 정도의 용도로 만들었다가 넷플릭스와 OneDrive로 모두 대체 되고 나서는 그 존재 의미가 희미해지고, 전기세가 아깝다는 생각에 모두 없에 버렸었다.

### 블로그는 어디에
물론 본인도 한 때는 열심히 블로그를 만들고 열심히 포스팅했던 시기가 있었습니다만, 무의미한 컨텐츠 생산에 염증을 느끼고, 특정 플랫폼에 귀속되는 데이터 관리에 불만을 가진터라 결국 더 이상 의미가 없다 생각하여 모든 내용을 삭제하고 본업에 충실하며 살아왔습니다.

### 코로나로 인한 늦은 후회
프리랜서 개발자로 오랜 시간을 개발하며 살아왔지만, 영업의 필요성이 없는 특정 회사 종속 개발자로 지내다 보니 미래에 대한 불안에 무감각하게 지내왔기도 했고, 코로나가 터지기 전에는 다른 회사의 일도 얻게 되면서 엄청 바빠지는 행운이 찾아와 정신없는 나날을 보냈었습니다.

하지만, 코로나로 인해 모든것이 변하고 변하지 않을 것 같던 회사와의 관계도 모두 끊기고 나니 그때서야 내가 했던 것들에 대한 기록이 없음이 너무나도 크고 아쉽게 다가오던군요.

## 클러스터
윈도우 응용프로그램을 주로 개발을 하다보니 새로운 .NET이 발표되거나 하면서 Azure, AWS 에서 운영되는 샘플을 접하다 보니 자연스럽게 kubernetes, docker swarm에 대한 관심이 있었으나, 서버를 직접 구성하고 운영을 연습해 보기에는 한계가 있었습니다.

### VPS
결국 웹호스팅이 가장 저렴하지 않을까 하는 생각에 Virtual Private Server(가상 개인 서버)에 대해 다방면으로 알아보고 Vultr라는 곳에서 한국 서버를 제공하는 것을 보고 3개의 노드를 임대하여 docker swarm 기반에 환경을 운영해 보기 시작합니다.

### 더 저렴한 방법은 없나
vultr vps를 이용하면 노드 1대당 부가세 제외 6달러로 저렴하다 생각이 들긴 하지만 트래픽 제한과 CPU 부하에 대한 부담도 하지 않을수는 없었고, 그 보다 더 큰 문제는 docker swarm 위에서 영구 스토리지를 운영하는 방법이 내가 기대했던것과는 다르게 구성해야 했기에 한계를 느낄수 밖에 없었습니다.

결국 이 문제를 내가 원하는 형태로 운영하려면 kubernetes를 선택해야 하는데 문제는 kubernetes에서 요구하는 노드의 최소 스펙이 2cpu, 최소 2GB 이상이 되야 쓸만하다고 가이드 하고 있습니다.

결국 VPS의 최소 사양이 높아지게 되고 그러면 vultr를 기준으로 1노드가 대략 18달러 정도 이므로 최소 3대의 노드를 운영하려면 부가세 포함 월 53달러 정도가 필요하게 된다는 결론에 도달합니다.

### 라즈베리파이 클러스터
쿠버네티스를 검색하다 보면 기존보다 라이트하게 운영이 가능한 K3S에 대해 접하게 됩니다. 그리고 k3s에 대해 검색을 하다 보면 Raspberry Pi에 대한 정보를 접하게 됩니다.

그리고 [Jeff Geeering](https://www.youtube.com/c/JeffGeerling) 의 동영상을 보게 되면서 라즈베리파이 클러스터에 대해 알게됩니다. 네.. 저는 그랬습니다.

물론 예전에도 라즈베리파이를 알기는 했습니다. 그때는 아두이노와 같은 개념에 더 가까웠었지요.. 주목할만한 것은 라즈베리파이4 에서 비약적인 성능향상으로 클러스터를 구성하여 활용하는 사람들이 많아졌다는 것을 알게 됩니다. 그리고 그렇게 집에 라즈베리파이 클러스터를 구성한 사람들이 홈랩이라고 부르며 사용합니다.

### DevOps
대부분의 개발자는 git을 활용합니다. github이던 gitlab이던 이제는 사용하지 않는 사람이 없을 것입니다.

그리고 언젠가 부터 개발자들은 CI/CD에 대해 고민해왔고 이제 그런 시스템을 라즈베리파이 클러스터를 이용해 자신의 집이나 작업장에 구현하여 사용해가고 홈랩이라 부르고 있다는 것입니다.
